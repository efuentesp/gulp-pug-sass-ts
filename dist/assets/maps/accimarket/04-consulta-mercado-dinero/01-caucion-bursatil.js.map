{"version":3,"sources":["accimarket/04-consulta-mercado-dinero/01-caucion-bursatil.ts"],"names":["console","log","$","accordion","ui_accordion_settings","datepicker","ui_datepicker_settings","rest_url","REST_URL","click","text_to_add","val","append","text","jqGrid","datatype","height","colNames","colModel","name","width","align","sortable","pager","rowNum","rowList","sortname","sortorder","viewrecords","gridview","autoencode","caption","contratos_params","http_findAll","payload","fillJqGrid","form","parsley","on","length","fecha","contrato","digito","negocio"],"mappings":"AAAAA,QAAQC,IAAI,uBAEZC,EAAE,iCAAiCC,UAAUC,uBAE7CF,EAAE,UAAUG,WAAWC,wBAEvB,IAAMC,SAAcC,SAAQ,eAE5BN,EAAE,sBAAsBO,MAAM,WAC5B,IAAMC,EAAcR,EAAE,aAAaS,MACnCX,QAAQC,IAAIS,GACZR,EAAE,wBAAwBU,OAAOV,EAAE,QAAQW,KAAKH,IAChDR,EAAE,aAAaS,IAAI,MAGrBT,EAAE,2BAA2BO,MAAM,WACjCT,QAAQC,IAAI,iBAGdC,EAAE,oBAAoBY,OAAO,CAC3BC,SAAU,QACVC,OAAQ,IACRC,SAAU,CACR,WACA,QACA,UACA,SACA,KACA,WACA,UACA,QACA,WACA,SACA,YACA,WACA,QACA,QACA,WAEFC,SAAU,CACR,CAAEC,KAAM,WAAYC,MAAO,IAC3B,CAAED,KAAM,QAASC,MAAO,IACxB,CAAED,KAAM,UAAWC,MAAO,GAAIC,MAAO,SACrC,CAAEF,KAAM,SAAUC,MAAO,GAAIC,MAAO,SACpC,CAAEF,KAAM,KAAMC,MAAO,GAAIC,MAAO,SAChC,CAAEF,KAAM,WAAYC,MAAO,IAAKE,UAAU,GAC1C,CAAEH,KAAM,UAAWC,MAAO,IAC1B,CAAED,KAAM,QAASC,MAAO,IACxB,CAAED,KAAM,WAAYC,MAAO,IAC3B,CAAED,KAAM,SAAUC,MAAO,IACzB,CAAED,KAAM,YAAaC,MAAO,IAC5B,CAAED,KAAM,WAAYC,MAAO,IAC3B,CAAED,KAAM,QAASC,MAAO,IACxB,CAAED,KAAM,QAASC,MAAO,IACxB,CAAED,KAAM,UAAWC,MAAO,KAE5BG,MAAO,mBACPC,OAAQ,GACRC,QAAS,CAAC,GAAI,GAAI,IAClBC,SAAU,WACVC,UAAW,OACXC,aAAa,EACbC,UAAU,EACVC,YAAY,EACZC,QAAS,KAIX,IAAIC,iBAA8B,GAKlCC,aAAa,YAAaD,iBAAkB,SAAAE,GAC1CC,WAAW,mBAAoBD,KAGjC,IAAME,KAAQlC,EAAE,uBACbmC,UACAC,GAAG,kBAAmB,WACVpC,EAAE,kBAAkBqC,SAKhCD,GAAG,cAAe,WACjBtC,QAAQC,IAAI,eAEZ+B,iBAAmB,GAEnB,IAAMQ,EAAQtC,EAAE,UAAUS,MACpB8B,EAAWvC,EAAE,aAAaS,MAC1B+B,EAASxC,EAAE,WAAWS,MACtBgC,EAAUzC,EAAE,iCAAiCS,MAmBnD,OAjBI6B,IACFR,iBAAiBQ,MAAQA,GAEvBC,IACFT,iBAAiBS,SAAWA,GAE1BC,IACFV,iBAAiBU,OAASA,GAExBC,IACFX,iBAAiBW,QAAUA,GAG7BV,aAAa,YAAaD,iBAAkB,SAAAE,GAC1CC,WAAW,mBAAoBD,MAG1B","file":"../../../pages/accimarket/04-consulta-mercado-dinero/01-caucion-bursatil.js","sourcesContent":["console.log(\"01-caucion-bursatil\");\r\n\r\n$(\"#criterios_busqueda_accordion\").accordion(ui_accordion_settings);\r\n\r\n$(\"#fecha\").datepicker(ui_datepicker_settings);\r\n\r\nconst rest_url = `${REST_URL}/fideicomiso`;\r\n\r\n$(\"#btn_plus_contrato\").click(() => {\r\n  const text_to_add = $(\"#contrato\").val() as string;\r\n  console.log(text_to_add);\r\n  $(\"ul#tag_list_contrato\").append($(\"<li>\").text(text_to_add));\r\n  $(\"#contrato\").val(\"\");\r\n});\r\n\r\n$(\"ul#tag_list_contrato li\").click(() => {\r\n  console.log(\"li clicked!\");\r\n});\r\n\r\n$(\"#table_contratos\").jqGrid({\r\n  datatype: \"local\",\r\n  height: 250,\r\n  colNames: [\r\n    \"Contrato\",\r\n    \"Libro\",\r\n    \"Cliente\",\r\n    \"Digito\",\r\n    \"TV\",\r\n    \"Descr TV\",\r\n    \"Emisora\",\r\n    \"Serie\",\r\n    \"Cantidad\",\r\n    \"Precio\",\r\n    \"Valuación\",\r\n    \"Promotor\",\r\n    \"Folio\",\r\n    \"Fecha\",\r\n    \"Negocio\"\r\n  ],\r\n  colModel: [\r\n    { name: \"contrato\", width: 55 },\r\n    { name: \"libro\", width: 90 },\r\n    { name: \"cliente\", width: 80, align: \"right\" },\r\n    { name: \"digito\", width: 80, align: \"right\" },\r\n    { name: \"tv\", width: 80, align: \"right\" },\r\n    { name: \"descr_tv\", width: 150, sortable: false },\r\n    { name: \"emisora\", width: 90 },\r\n    { name: \"serie\", width: 90 },\r\n    { name: \"cantidad\", width: 90 },\r\n    { name: \"precio\", width: 90 },\r\n    { name: \"valuacion\", width: 90 },\r\n    { name: \"promotor\", width: 90 },\r\n    { name: \"folio\", width: 90 },\r\n    { name: \"fecha\", width: 90 },\r\n    { name: \"negocio\", width: 90 }\r\n  ],\r\n  pager: \"#pager_contratos\",\r\n  rowNum: 10,\r\n  rowList: [10, 20, 30],\r\n  sortname: \"contrato\",\r\n  sortorder: \"desc\",\r\n  viewrecords: true,\r\n  gridview: true,\r\n  autoencode: true,\r\n  caption: \"\"\r\n});\r\n\r\n// Form validations\r\nlet contratos_params: UrlParams = {\r\n  // cliente: \"CLIENTE 01\",\r\n  // contrato: \"CONTRATO 01\"\r\n};\r\n\r\nhttp_findAll(\"contratos\", contratos_params, payload => {\r\n  fillJqGrid(\"#table_contratos\", payload);\r\n});\r\n\r\nconst form = ($(\"#criterios-busqueda\") as any)\r\n  .parsley()\r\n  .on(\"field:validated\", () => {\r\n    const ok = $(\".parsley-error\").length === 0;\r\n    // console.log(\"Errores de validación\", $(\".parsley-error\"))\r\n    // $(\".callout-info\").toggleClass(\"hidden\", !ok);\r\n    // $(\".callout-warning\").toggleClass(\"hidden\", ok);\r\n  })\r\n  .on(\"form:submit\", () => {\r\n    console.log(\"form:submit\");\r\n\r\n    contratos_params = {};\r\n\r\n    const fecha = $(\"#fecha\").val();\r\n    const contrato = $(\"#contrato\").val();\r\n    const digito = $(\"#digito\").val();\r\n    const negocio = $(\"input[name='negocio']:checked\").val();\r\n\r\n    if (fecha) {\r\n      contratos_params.fecha = fecha;\r\n    }\r\n    if (contrato) {\r\n      contratos_params.contrato = contrato;\r\n    }\r\n    if (digito) {\r\n      contratos_params.digito = digito;\r\n    }\r\n    if (negocio) {\r\n      contratos_params.negocio = negocio;\r\n    }\r\n\r\n    http_findAll(\"contratos\", contratos_params, payload => {\r\n      fillJqGrid(\"#table_contratos\", payload);\r\n    });\r\n\r\n    return false;\r\n  });\r\n"]}